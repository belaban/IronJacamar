<?xml version="1.0" encoding="UTF-8"?>
<!-- The Hypersonic embedded database JCA connection factory config -->
<!-- See http://www.jboss.org/community/wiki/Multiple1PC for information about datasource -->
<!-- $Id: hsqldb-ds.xml 97536 2009-12-08 14:05:07Z jesper.pedersen $ -->
<datasources xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="http://www.jboss.org/jee/schema/ironjacamar/datasources_1_0.xsd">
  <datasource pool-name="DefaultDS">
    <connection-url>jdbc:hsqldb:${jboss.server.data.dir}${/}hypersonic${/}localDB</connection-url>
    <!-- The driver class -->
    <driver-class>org.hsqldb.jdbcDriver</driver-class>
    <pool>
      <!-- The minimum connections in a pool/sub-pool. Pools are lazily constructed on first use -->
      <min-pool-size>5</min-pool-size>
      <!-- The maximum connections in a pool/sub-pool -->
      <max-pool-size>20</max-pool-size>
      <!-- The login and password -->
    </pool>
    <security>
      <user-name>sa</user-name>
      <password></password>
    </security> 
    <!-- For server mode db, allowing other processes to use hsqldb over tcp. This requires the org.jboss.jdbc.HypersonicDatabase 
      mbean. <connection-url>jdbc:hsqldb:hsql://${jboss.bind.address}:1701</connection-url> -->
    <!-- For totally in-memory db, not saved when jboss stops. The org.jboss.jdbc.HypersonicDatabase mbean is required for 
      proper db shutdown <connection-url>jdbc:hsqldb:.</connection-url> -->
    <!-- For in-process persistent db, saved when jboss stops. The org.jboss.jdbc.HypersonicDatabase mbean is required for 
      proper db shutdown -->
    <time-out>
      <!-- The time before an unused connection is destroyed -->
      <!-- NOTE: This is the check period. It will be destroyed somewhere between 1x and 2x this timeout after last use -->
      <!-- TEMPORARY FIX! - Disable idle connection removal, HSQLDB has a problem with not reaping threads on closed connections -->
      <idle-timeout-minutes>0</idle-timeout-minutes>
    </time-out>
    <statement>
      <!-- Whether to check all statements are closed when the connection is returned to the pool, this is a debugging feature 
        that should be turned off in production -->
      <track-statements>true</track-statements>
      <!-- HSQL DB benefits from prepared statement caching -->
      <prepared-statement-cache-size>32</prepared-statement-cache-size>
    </statement>
    <validation>
      <!-- example of how to specify a class that determines a connection is valid before it is handed out from the pool -->
      <valid-connection-checker class-name="org.jboss.jca.adapters.jdbc.vendor.DummyValidConnectionChecker"></valid-connection-checker>
      <!-- this will be run before a managed connection is removed from the pool for use by a client -->
      <check-valid-connection-sql>select * from something</check-valid-connection-sql>
      <!--example of how to specify class that determines if exception means connection should be destroyed -->
      <exception-sorter class-name="org.jboss.jca.adapters.jdbc.vendor.DummyExceptionSorter"></exception-sorter>
    </validation>
  </datasource>
</datasources>