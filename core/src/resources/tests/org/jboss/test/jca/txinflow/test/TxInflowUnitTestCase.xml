<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:jboss:bean-deployer bean-deployer_1_0.xsd"
            xmlns="urn:jboss:bean-deployer">

   <bean name="TransactionManager" class="org.jboss.tm.TxManager">
      <constructor factoryClass="org.jboss.tm.TxManager" factoryMethod="getInstance"/>
      <property name="globalIdsEnabled">true</property>
   </bean>

   <bean name="ThreadPool" class="org.jboss.util.threadpool.BasicThreadPool"/>

   <bean name="WorkManager" class="org.jboss.jca.plugins.rar.work.JBossWorkManager">
      <property name="threadPool"><inject bean="ThreadPool"/></property>
      <property name="xaTerminator"><inject bean="TransactionManager"/></property>
   </bean>

   <bean name="BootstrapContextFactory" class="org.jboss.jca.spi.rar.BootstrapContextFactory">
      <property name="workManager"><inject bean="WorkManager" property="workManager"/></property>
      <property name="xaTerminator"><inject bean="TransactionManager"/></property>
   </bean>

   <bean name="TestRAR" class="org.jboss.test.jca.rar.support.TestResourceAdapter">
      <start method="start">
         <parameter><inject bean="BootstrapContextFactory" property="bootstrapContext"/></parameter>
      </start>
   </bean>
      
</deployment>
